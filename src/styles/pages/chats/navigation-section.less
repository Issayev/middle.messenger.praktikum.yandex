@import "../../helpers/common.less";
@import "../../helpers/mixins-common.less";

@chats-list-background-color: #e9f2ff;
@chats-number-per-page: 7;

// ------------------------------------

.navigation-section-mixin(
  @flex, 
  @header-section-flex
) {
  @chats-list-section-flex: 100% - @header-section-flex;
  @chat-row-width: 100vw * (@flex / 100%);
  @chat-row-height: 100vh * (@chats-list-section-flex / 100%) *
    (1 / @chats-number-per-page);

  .navigation-section {
    &:extend(.vertical-block);
    flex: @flex;
    background-color: @chats-list-background-color;

    & > * {
      width: 100%;
    }

    .navigation-section-header {
      flex: @header-section-flex;
      &:extend(.horizontal-block);
      & > * {
        &:extend(.vertical-block);
      }

      border-bottom: 0.2em solid darken(@chats-list-background-color, 20%);

      .search-section {
        flex: 3;
        width: 60%;
        margin-top: 100vh * (@header-section-flex / 100%) * (1/3);
        margin-bottom: $margin-top;

        input {
          width: 80%;
          height: 100%;
          text-align: center;
        }
      }

      .home-button-section {
        flex: 1;
      }
    }

    .chats-list {
      flex: @chats-list-section-flex;
      overflow: auto;
      width: 100%;

      @avatar-section-part: 25%;
      @chat-list-avatar-max-size: min(
        @chat-row-height,
        (@avatar-section-part / 100%) * @chat-row-width
      );
      @h: @chat-list-avatar-max-size;

      .chat-field.current-chat {
        background-color: darken(@chats-list-background-color, 3%);
      }

      .chat-field {
        width: 100%;
        &:extend(.horizontal-block);
        height: @chat-row-height;

        .mixin-field-section(@width) {
          width: @width;
          padding: calc(0.1 * @h) 3%;
          height: auto;
          &:extend(.vertical-block);
        }

        .avatar-section {
          .mixin-field-section(@h);
          padding-right: 1%;

          img {
            border-radius: 50%;
            height: calc(0.8 * @h);
            width: calc(0.8 * @h);
            align-self: flex-start;
          }
        }

        .message-section {
          .mixin-field-section(calc(100% - @h));
          padding-left: 1%;

          .message {
            height: 100%;
            align-self: flex-end;
            font-size: 1rem;
          }
        }
      }

      .chat-field {
        .mixin-one-side-horizontal-border(@color: @chats-list-background-color, @side: ~"bottom");
      }
    }
  }
}
